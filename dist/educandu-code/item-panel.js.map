{
  "version": 3,
  "sources": ["../../src/educandu-code/item-panel.js"],
  "sourcesContent": ["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Button, Collapse, Tooltip } from 'antd';\r\nimport DeleteIcon from '@educandu/educandu/components/icons/general/delete-icon.js';\r\nimport MoveUpIcon from '@educandu/educandu/components/icons/general/move-up-icon.js';\r\nimport MoveDownIcon from '@educandu/educandu/components/icons/general/move-down-icon.js';\r\nimport { confirmDeleteItem } from '@educandu/educandu/components/confirmation-dialogs.js';\r\n\r\nfunction ItemPanel({\r\n  index,\r\n  header,\r\n  children,\r\n  dragHandleProps,\r\n  isDragged,\r\n  isOtherDragged,\r\n  itemsCount,\r\n  canDeleteLastItem,\r\n  extraActionButtons,\r\n  onMoveUp,\r\n  onMoveDown,\r\n  onDelete,\r\n  onExtraActionButtonClick\r\n}) {\r\n  const { t } = useTranslation();\r\n\r\n  const handleActionButtonWrapperClick = (event, actionButton) => {\r\n    if (actionButton.disabled) {\r\n      event.stopPropagation();\r\n    }\r\n  };\r\n\r\n  const handleActionButtonClick = (event, actionButton) => {\r\n    event.stopPropagation();\r\n\r\n    switch (actionButton.key) {\r\n      case 'moveUp':\r\n        return onMoveUp(index);\r\n      case 'moveDown':\r\n        return onMoveDown(index);\r\n      case 'delete':\r\n        return confirmDeleteItem(t, header, () => onDelete(index));\r\n      default:\r\n        return onExtraActionButtonClick(actionButton.key);\r\n    }\r\n  };\r\n\r\n  const actionButtons = [];\r\n  if (onMoveUp) {\r\n    actionButtons.push({\r\n      key: 'moveUp',\r\n      title: t('common:moveUp'),\r\n      icon: <MoveUpIcon />,\r\n      disabled: index === 0\r\n    });\r\n  }\r\n  if (onMoveDown) {\r\n    actionButtons.push({\r\n      key: 'moveDown',\r\n      title: t('common:moveDown'),\r\n      icon: <MoveDownIcon />,\r\n      disabled: index === itemsCount - 1\r\n    });\r\n  }\r\n  if (onDelete) {\r\n    const isDeleteDisabled = !canDeleteLastItem && itemsCount <= 1;\r\n    actionButtons.push({\r\n      key: 'delete',\r\n      title: t('common:delete'),\r\n      icon: <DeleteIcon />,\r\n      danger: !isDeleteDisabled,\r\n      disabled: isDeleteDisabled\r\n    });\r\n  }\r\n\r\n  actionButtons.push(...extraActionButtons);\r\n\r\n  const renderActionButtons = () => {\r\n    if (!actionButtons.length) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div className=\"ItemPanel-actionButtons\">\r\n        {actionButtons.map(actionButton => (\r\n          <div key={actionButton.key} onClick={event => handleActionButtonWrapperClick(event, actionButton)}>\r\n            <Tooltip title={actionButton.title}>\r\n              <Button\r\n                type=\"text\"\r\n                size=\"small\"\r\n                icon={actionButton.icon}\r\n                disabled={actionButton.disabled}\r\n                className={classNames('u-action-button', { 'u-danger-action-button': actionButton.danger })}\r\n                onClick={event => handleActionButtonClick(event, actionButton)}\r\n                />\r\n            </Tooltip>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Collapse collapsible=\"icon\" className={classNames('ItemPanel', { 'is-dragged': isDragged, 'is-other-dragged': isOtherDragged })} defaultActiveKey=\"panel\">\r\n      <Collapse.Panel\r\n        key=\"panel\"\r\n        header={<div {...dragHandleProps} className=\"ItemPanel-header\">{header}</div>}\r\n        extra={renderActionButtons()}\r\n        >\r\n        <div className=\"ItemPanel-contentWrapper\">\r\n          {children}\r\n        </div>\r\n      </Collapse.Panel>\r\n    </Collapse>\r\n  );\r\n}\r\n\r\nItemPanel.propTypes = {\r\n  canDeleteLastItem: PropTypes.bool,\r\n  children: PropTypes.node.isRequired,\r\n  extraActionButtons: PropTypes.arrayOf(PropTypes.shape({\r\n    key: PropTypes.string.isRequired,\r\n    title: PropTypes.string.isRequired,\r\n    icon: PropTypes.node,\r\n    danger: PropTypes.bool,\r\n    disabled: PropTypes.bool\r\n  })),\r\n  header: PropTypes.string,\r\n  index: PropTypes.number,\r\n  dragHandleProps: PropTypes.object,\r\n  isDragged: PropTypes.bool,\r\n  isOtherDragged: PropTypes.bool,\r\n  itemsCount: PropTypes.number,\r\n  onDelete: PropTypes.func,\r\n  onExtraActionButtonClick: PropTypes.func,\r\n  onMoveDown: PropTypes.func,\r\n  onMoveUp: PropTypes.func\r\n};\r\n\r\nItemPanel.defaultProps = {\r\n  canDeleteLastItem: false,\r\n  extraActionButtons: [],\r\n  header: '',\r\n  index: 0,\r\n  dragHandleProps: null,\r\n  isDragged: false,\r\n  isOtherDragged: false,\r\n  itemsCount: 1,\r\n  onDelete: null,\r\n  onExtraActionButtonClick: () => {},\r\n  onMoveDown: null,\r\n  onMoveUp: null\r\n};\r\n\r\nexport default ItemPanel;\r\n"],
  "mappings": "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",
  "names": []
}
